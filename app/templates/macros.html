{% macro render_field(field, label_class="", field_class="", show_label=true) %}
<div class="form-group">
    {% if show_label and field.label %}
    {{ field.label(class=label_class) }}
    {% endif %}
    {{ field(class=field_class) }}
    {% if field.errors %}
    <div class="invalid-feedback">
        {% for error in field.errors %}
        <span>{{ error }}</span>
        {% endfor %}
    </div>
    {% endif %}
</div>
{% endmacro %}

{% macro render_form_errors(form) %}
{% if form.errors %}
<div class="alert alert-danger">
    <ul class="mb-0">
        {% for field_name, field_errors in form.errors.items() %}
        {% for error in field_errors %}
        <li>{{ error }}</li>
        {% endfor %}
        {% endfor %}
    </ul>
</div>
{% endif %}
{% endmacro %}

{% macro render_flashed_messages() %}
{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
<div class="fixed top-4 right-4 z-50 space-y-2">
    {% for category, message in messages %}
    <div class="alert alert-{{ 'danger' if category == 'error' else category }} alert-dismissible fade show shadow-lg"
        role="alert">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
    {% endfor %}
</div>
{% endif %}
{% endwith %}
{% endmacro %}